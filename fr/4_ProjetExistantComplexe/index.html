<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://iblasquez.github.io/tuto-copilot-genai/fr/4_ProjetExistantComplexe/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Reprise d'un projet complexe existant (legacy code) - Copilot & Co Tutorial</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Reprise d\u0027un projet complexe existant (legacy code)";
        var mkdocs_page_input_path = "fr\\4_ProjetExistantComplexe.md";
        var mkdocs_page_url = "/tuto-copilot-genai/fr/4_ProjetExistantComplexe/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../en/" class="icon icon-home"> Copilot & Co Tutorial
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">version fran√ßaise</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../">Accueil</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../1_Installation/">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../2_PriseEnMainAssistant/">Prise en main de l'assistant de code</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../3_ProjetExistantSimple/">Mise en place de nouvelles r√®gles m√©tiers dans un projet simple</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Reprise d'un projet complexe existant (legacy code)</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#41-avoir-une-vision-et-une-comprehension-globale-du-projet">4.1 Avoir une vision et une compr√©hension globale du projet</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#41a-premiere-vision-globale-du-projet">4.1.a Premi√®re vision globale du projet</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#41b-garder-une-trace-de-la-vision-globale-du-projet-dans-un-readme">4.1.b Garder une trace de la vision globale du projet dans un README</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#41c-approfondir-la-vision-globale-du-projet">4.1.c Approfondir la vision globale du projet</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#explorer-les-points-dentree-du-systeme">Explorer les points d'entr√©e du syst√®me</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#explorer-le-metier">Explorer le m√©tier</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#vision-plus-globale-du-metier-module-common">Vision plus globale du m√©tier (module common)</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#vision-plus-globale-du-projet-et-precision-des-reponses">Vision plus globale du projet et pr√©cision des r√©ponses</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#42-mettre-en-place-un-environnement-de-developpement-fonctionnel">4.2 Mettre en place un environnement de d√©veloppement fonctionnel</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#43-ameliorer-la-qualite-de-code-dun-projet-existant">4.3 Am√©liorer la qualit√© de code d'un projet existant</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#43a-bien-comprendre-les-choix-de-conception-et-le-code-existant">4.3.a Bien comprendre les choix de conception et le code existant</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#se-rafraichir-la-memoire-sur-le-comportement-de-la-classe">Se rafra√Æchir la m√©moire sur le comportement de la classe :**</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#explorer-le-concept-dast-abstract-syntax-tree">Explorer le concept d'AST (Abstract Syntax Tree)</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#comprendre-limplementation-de-last-dans-javafileparser">Comprendre l'impl√©mentation de l'AST dans JavaFileParser</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#explorer-la-methode-processfile">Explorer la m√©thode processFile</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#le-pattern-visiteur-et-voidvisitorpattern">Le Pattern Visiteur et VoidVisitorPattern</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#43b-aider-a-la-mise-en-place-de-nouveaux-tests-unitaires">4.3.b Aider √† la mise en place de nouveaux tests unitaires</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#1-ameliorer-la-couverture-de-code-de-la-classe-wordanalyticsservice">1. Am√©liorer la couverture de code de la classe WordAnalyticsService</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#2-tester-la-classe-javafileparser">2. Tester la classe JavaFileParser</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#43c-aider-au-refactoring">4.3.c Aider au refactoring</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#43d-aider-a-la-revue-de-code">4.3.d Aider √† la revue de code</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#44-proposer-des-pistes-damelioration-sur-des-problematiques-sensibles">4.4 Proposer des pistes d'am√©lioration sur des probl√©matiques sensibles</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../Liens/">Quelques liens utiles</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">english version</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../en/">Home</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../en/">Copilot & Co Tutorial</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../en/" class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">version fran√ßaise</li>
      <li class="breadcrumb-item active">Reprise d'un projet complexe existant (legacy code)</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="4-quid-dun-assistant-de-code-pour-la-reprise-dun-projet-complexe-existant-legacy-code">4. Quid d'un assistant de code pour la reprise d'un projet complexe existant (legacy code)<a class="headerlink" href="#4-quid-dun-assistant-de-code-pour-la-reprise-dun-projet-complexe-existant-legacy-code" title="Permanent link">&para;</a></h1>
<hr />
<ul>
<li>
<p><a href="#4-quid-dun-assistant-de-code-pour-la-reprise-dun-projet-complexe-existant-legacy-code">4.1 Avoir une vision et une compr√©hension globale du projet</a></p>
</li>
<li>
<p><a href="#41a-premi√®re-vision-globale-du-projet">4.1.a Premi√®re vision globale du projet</a></p>
</li>
<li><a href="#41b-garder-une-trace-de-la-vision-globale-du-projet-dans-un-readme">4.1.b Garder une trace de la vision globale du projet dans un README</a></li>
<li>
<p><a href="#41c-approfondir-la-vision-globale-du-projet">4.1.c Approfondir la vision globale du projet</a></p>
<ul>
<li><a href="#explorer-les-points-dentr√©e-du-syst√®me">Explorer les points d'entr√©e du syst√®me</a></li>
<li><a href="#explorer-le-m√©tier">Explorer le m√©tier</a><br />
    (<a href="#zoom-sur-la-classe-wordanalyticsservice">classe <code>WordAnalyticsService</code></a>, <a href="#zoom-sur-la-classe-filereader">classe <code>FileReader</code></a> , <a href="#zoom-sur-la-classe-javafileparser">classe <code>JavaFileParser</code></a>,<br />
<a href="#essayer-de-comprendre-rapidement-un-choix-de-conception">essayer de comprendre rapidement un choix de conception</a>)</li>
<li><a href="#vision-plus-globale-du-m√©tier-module-common">Vision plus globale du m√©tier (module <code>common</code>)</a>  </li>
<li><a href="#vision-plus-globale-du-m√©tier-module-common">Vision plus globale du projet et pr√©cision des r√©ponses</a>  </li>
</ul>
</li>
<li>
<p><a href="#41c-approfondir-la-vision-globale-du-projet">4.2 Mettre en place un environnement de d√©veloppement fonctionnel</a></p>
</li>
<li>
<p><a href="#43-am√©liorer-la-qualit√©-de-code-dun-projet-existant">4.3 Am√©liorer la qualit√© de code d'un projet existant</a></p>
</li>
<li><a href="#43a-bien-comprendre-les-choix-de-conception-et-le-code-existant">4.3.a Bien comprendre les choix de conception et le code existant</a><ul>
<li><a href="#se-rafra√Æchir-la-m√©moire-sur-le-comportement-de-la-classe-">Se rafra√Æchir la m√©moire sur le comportement de la classe</a></li>
<li><a href="#explorer-le-concept-dast-abstract-syntax-tree">Explorer le concept d'AST (Abstract Syntax Tree)</a>  </li>
<li><a href="#comprendre-limpl√©mentation-de-last-dans-javafileparser">Comprendre l'impl√©mentation de l'AST dans <code>JavaFileParser</code></a></li>
<li><a href="#explorer-la-m√©thode-processfile">Explorer la m√©thode <code>processFile</code></a>  </li>
<li><a href="#le-pattern-visiteur-et-voidvisitorpattern">Le Pattern Visiteur et <code>VoidVisitorPattern</code></a></li>
</ul>
</li>
<li><a href="#43b-aider-√†-la-mise-en-place-de-nouveaux-tests-unitaires">4.3.b Aider √† la mise en place de nouveaux tests unitaires</a><ul>
<li><a href="#1-am√©liorer-la-couverture-de-code-de-la-classe-wordanalyticsservice">Am√©liorer la couverture de code de la classe <code>WordAnalyticsService</code></a></li>
<li><a href="#2-tester-la-classe-javafileparser">Tester la classe <code>JavaFileParser</code></a></li>
</ul>
</li>
<li><a href="#43c-aider-au-refactoring">4.3.c Aider au refactoring</a></li>
<li>
<p><a href="#43d-aider-√†-la-revue-de-code">4.3.d Aider √† la revue de code</a></p>
</li>
<li>
<p><a href="#44-proposer-des-pistes-dam√©lioration-sur-des-probl√©matiques-sensibles">4.4 Proposer des pistes d'am√©lioration sur des probl√©matiques sensibles</a></p>
</li>
</ul>
<hr />
<p>Dans un article r√©cent intitul√© <a href="https://martinfowler.com/articles/legacy-modernization-gen-ai.html">Legacy Modernization meets GenAI</a>, Martin Fowler a √©crit :  </p>
<blockquote>
<p><em>Jusqu'√† pr√©sent, la majorit√© de l'attention port√©e √† l'intelligence artificielle g√©n√©rative (GenAI) dans le d√©veloppement logiciel est ax√©e sur la g√©n√©ration de code. Mais nous croyons qu'il y a autant, voire plus, de valeur dans la compr√©hension du code existant - en particulier des syst√®mes h√©rit√©s complexes, volumineux et anciens.</em></p>
</blockquote>
<p><strong>GitHub Copilot</strong> est un outil d'IA g√©n√©rative pour le code parmi d'autres (<a href="https://codeium.com">Codeium</a>, <a href="https://www.cursor.com">Cursor</a>, <a href="https://supermaven.com/">Supermaven</a>, <a href="https://www.tabnine.com">Tabnine</a>,..) qui peut nous aider dans ce sens, en nous fournissant aussi bien une vue d'ensemble d'un syst√®me, qu'en d√©taillant des points pr√©cis d'un code legacy pour mieux le comprendre et √©ventuellement en am√©liorer sa qualit√©.<br />
Pour ce tutoriel, vous utiliserez le code du projet <strong><code>codelinguo</code></strong> d√©velopp√© par un groupe d'√©tudiants de 3√®me ann√©e de BUT Informatique dans le cadre d'une SAE (Situation d'Apprentissage et d'√âvaluation).<br />
Vous commencerez donc par <strong>cloner ce projet</strong> : <a href="https://github.com/carlodrift/codelinguo">https://github.com/carlodrift/codelinguo</a><br />
et ouvrirez ce projet dans votre IDE pr√©f√©r√© muni de Copilot (IntelliJ ou Visual Studio).</p>
<blockquote>
<p><strong>Disclaimer :</strong> Tout au long de ce tutoriel, restez attentif aux r√©ponses fournies par votre assistant de code. Comme tout outil d'IA g√©n√©rative, il peut parfois produire des "<strong>hallucinations</strong>". Bien que ces outils soient tr√®s pratiques, il est essentiel de garder un esprit critique. Votre libre arbitre reste indispensable pour faire la part des choses entre les suggestions de l'assistant et la r√©alit√© de votre projet.</p>
</blockquote>
<p><em>Pour le moment, contentez-vous uniquement d'ouvrir ce projet dans votre IDE pr√©f√©r√©.<br />
Pour obtenir une vue d'ensemble du projet, il n'est pas utile d'essayer de compiler ou de builder le projet (ce point sera trait√© un peu plus tard).
Ayez juste le code de votre projet sous les yeux dans l'IDE, avec un chat Copilot ouvert, et laissez-vous guider...</em></p>
<h2 id="41-avoir-une-vision-et-une-comprehension-globale-du-projet">4.1 Avoir une vision et une compr√©hension globale du projet<a class="headerlink" href="#41-avoir-une-vision-et-une-comprehension-globale-du-projet" title="Permanent link">&para;</a></h2>
<h3 id="41a-premiere-vision-globale-du-projet">4.1.a Premi√®re vision globale du projet<a class="headerlink" href="#41a-premiere-vision-globale-du-projet" title="Permanent link">&para;</a></h3>
<p>Apr√®s avoir ouvert le chat de votre assistant de code dans votre IDE, vous pouvez interagir avec lui, que ce soit en fran√ßais ou en anglais, de mani√®re plus ou moins d√©taill√©e comme vu pr√©c√©demment.</p>
<ul>
<li>
<p>Commencez, par exemple, par lui demander une vision globale du projet en anglais :<br />
<code>describe this project</code></p>
</li>
<li>
<p>ou en fran√ßais :<br />
<code>Pourrais-tu me d√©crire ce projet</code></p>
</li>
<li>
<p>ou m√™me en utilisant des agents de conversation<br />
<code>/explain @workspace</code></p>
</li>
</ul>
<p><strong>Au-del√† de votre assistant de code</strong>, vous disposez toujours de votre exp√©rience/expertise en d√©veloppement logiciel. <strong>Explorez √©galement manuellement le projet dans votre IDE</strong> (architecture, noms des classes‚Ä¶).
<strong>En d√©pliant l'arborescence du projet</strong>, vous constatez qu'il est structur√© autour de :</p>
<ul>
<li>3 modules <strong>Maven</strong> : <code>cli</code>, <code>common</code>, <code>desktop</code></li>
<li>1 module <strong>Gradle</strong> : <code>intellij-plugin</code></li>
</ul>
<p>Selon votre exp√©rience/expertise, vous avez peut-√™tre envie de poser des questions suppl√©mentaires √† votre assistant :
<code>√Ä quoi correspond cli ? desktop ? intellij-plugin ? common ? dans ce projet</code></p>
<p>Et si vous lui reposez ensuite la question :<br />
<code>Pourrais-tu me d√©crire le projet ?</code></p>
<p>La r√©ponse sera plus d√©taill√©e que pr√©c√©demment, car au fil des discussions, <strong>l'assistant enrichit son contexte des informations apprises lors des √©changes pr√©c√©dents.</strong></p>
<p><strong>Au-del√† des questions techniques</strong>, vous pouvez √©galement interroger l'assistant sur la finalit√© de l'application avec des questions telles que :
<code>Quel est selon toi le contexte m√©tier de l'application ?</code>
<code>√Ä quoi sert cette application ?</code></p>
<h3 id="41b-garder-une-trace-de-la-vision-globale-du-projet-dans-un-readme">4.1.b Garder une trace de la vision globale du projet dans un README<a class="headerlink" href="#41b-garder-une-trace-de-la-vision-globale-du-projet-dans-un-readme" title="Permanent link">&para;</a></h3>
<p>Dans un projet collaboratif, le fichier <code>README</code> est essentiel pour fournir une vue d'ensemble et aider les collaborateurs √† se familiariser rapidement avec le projet.<br />
Le projet que vous avez r√©cup√©r√© n'en contient pas ? Pas de souci, vous pouvez demander √† l'assistant de g√©n√©rer un <code>README</code> bas√© sur ce qu'il a <em>vu</em> dans le projet, en utilisant par exemple le prompt suivant :</p>
<p><code>@workspace generate a readme document that can be used as a repo description</code></p>
<blockquote>
<p><strong>Remarque :</strong> <em>Pour l'instant, vous √™tes juste en mode exploration du projet avec votre assistant de code, sans intention d'ajouter de code. Si plus tard vous d√©cidez d'inclure un <code>README</code> dans le projet, vous pourrez r√©utiliser le prompt pr√©c√©dent. Gr√¢ce aux nombreuses interactions que vous aurez eues entre-temps, le <code>README</code> g√©n√©r√© n'en sera que plus d√©taill√© et pertinent.</em></p>
</blockquote>
<h3 id="41c-approfondir-la-vision-globale-du-projet">4.1.c Approfondir la vision globale du projet<a class="headerlink" href="#41c-approfondir-la-vision-globale-du-projet" title="Permanent link">&para;</a></h3>
<p>Pour aller plus loin dans votre compr√©hension, continuez √† interroger/challenger l'assistant sur les points d'entr√©e du syst√®me et quelques classes m√©tier de l'application.</p>
<h4 id="explorer-les-points-dentree-du-systeme">Explorer les points d'entr√©e du syst√®me<a class="headerlink" href="#explorer-les-points-dentree-du-systeme" title="Permanent link">&para;</a></h4>
<p>Votre assistant vous a d√©j√† peut-√™tre mentionn√© les points d'entr√©e, n'h√©sitez pas √† lui demander explicitement de les √©num√©rer √† nouveau :
<code>Quels sont les points d'entr√©e du syst√®me ?"</code></p>
<p><strong>Remarque :</strong> <em>La r√©ponse que vous obtiendrez peut √™tre une </em><em>hallucination</em><em> (sur le nom de la classe consid√©r√©e comme point d'entr√©e), mais elle devrait n√©anmoins vous guider dans la bonne direction.</em></p>
<ul>
<li>
<p><strong>Commencez par ouvrir</strong> le fichier <code>Main.java</code> dans le module <code>cli</code> (<code>fr.unilim.codelinguo.cli</code>) et, de la m√™me mani√®re que tout ce qui a √©t√© fait pr√©c√©demment, posez des questions comme :<br />
<code>Pourrais-tu me d√©crire ce code ?</code>
  <code>/explain this</code>,<br />
<code>/explain this class</code><br />
<em>(√† vous de voir le type de formulation et le(s) langue(s) que vous pr√©f√©rez utiliser)</em></p>
</li>
<li>
<p><strong>De la m√™me mani√®re</strong>, ouvrez le fichier <code>Main.kt</code> dans le module <code>desktop</code> (<code>fr.unilim.codelinguo.desktop</code>) et discutez avec votre assistant de code.</p>
</li>
<li>
<p><strong>Enfin</strong>, ouvrez le fichier <code>Main.java</code> dans le module <code>intellij-plugin</code> (<code>fr.unilim.codelinguo.intellijplugin</code>) et √©changez avec votre assistant.</p>
</li>
</ul>
<p>Dans les r√©ponses de l'assistant, certains noms de classes m√©tier, comme <code>FileReader</code> et <code>WordAnalyticsService</code>, vont probablement ressortir plusieurs fois. Cela devrait vous inciter √† explorer le module <code>common</code> pour en apprendre davantage sur le domaine m√©tier de l'application.</p>
<h4 id="explorer-le-metier">Explorer le m√©tier<a class="headerlink" href="#explorer-le-metier" title="Permanent link">&para;</a></h4>
<p>Vous pouvez explorer le c√¥t√© m√©tier de l'application de mani√®re plus ou moins d√©taill√©e.
Par o√π commencer ? Pourquoi ne pas d√©buter avec la classe <code>WordAnalyticsService</code>, mentionn√©e lors de vos pr√©c√©dents √©changes ?</p>
<h5 id="zoom-sur-la-classe-wordanalyticsservice">Zoom sur la classe <code>WordAnalyticsService</code><a class="headerlink" href="#zoom-sur-la-classe-wordanalyticsservice" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>Pour commencer, <strong>localisez la classe</strong> dans le projet et <strong>ouvrez la classe</strong>.
Pour cela, aidez-vous de l'assistant  en lui demandant :
<code>O√π se trouve la classe WordAnalyticsService ?</code></p>
</li>
<li>
<p>Une fois la classe ouverte, <strong>engagez la discussion</strong> avec l'assistant pour obtenir une <strong>vision globale de la classe</strong> :</p>
</li>
<li><code>Que fait ce code ?</code></li>
<li><code>Pourquoi la classe WordAnalyticsService ?</code> (pour une r√©ponse plus <strong><em>m√©tier</em></strong>)</li>
<li><code>/explain this</code> (pour une r√©ponse plus <strong><em>technique</em></strong> expliquant <strong><em>comment</em></strong> le code fonctionne)</li>
</ul>
<p>Vous venez d'obtenir des r√©ponses plus ou moins d√©taill√©es, plus ou moins orient√©es m√©tier, plus ou moins techniques. Il est donc important de remarquer que, outre le caract√®re probabiliste des r√©ponses g√©n√©r√©es par une IA G√©n√©rative, <strong>le style et le contenu de la r√©ponse vont √™tre diff√©rents suivant la mani√®re dont vous posez vos questions (prompt).</strong></p>
<p>Pour vous en convaincre, testez diff√©rentes formulations pour voir comment elles influencent les r√©ponses de l'assistant :</p>
<ul>
<li><code>Pourrais-tu me d√©crire la classe WordAnalyticsService</code></li>
<li><code>Pourrais-tu m'expliquer la classe WordAnalyticsService</code></li>
<li><code>A quoi sert la classe WordAnalyticsService ?</code></li>
<li><code>Explain how the code works ?</code></li>
<li><code>Explain how this code can be used ?</code></li>
<li><code>Explain why this code exists ?</code></li>
<li><code>...</code></li>
</ul>
<blockquote>
<p>Lorsque vous √©changez avec une IA g√©n√©rative, pour obtenir des <strong>r√©ponses pertinentes</strong>, il est important d'<strong>apprendre √† bien communiquer avec <em>cette</em> IA, un peu comme on apprendrait √† communiquer dans une nouvelle langue √©trang√®re</strong> (utiliser les bonnes formulations, les mots ad√©quats, poser les questions au bon moment‚Ä¶).
Il est donc n√©cessaire de <strong>vous entra√Æner √† discuter avec <em>votre</em> IA</strong> afin de trouver les formulations et le mode d'expression qui correspondent √† vos besoins. <strong>Prendre le temps d'apprendre √† formuler votre prompt avec pr√©cision est un passage essentiel pour obtenir des r√©ponses pr√©cises</strong> et √™tre encore plus productif avec votre IA</p>
</blockquote>
<p><strong>Disclaimer :</strong> <em>√Ä long terme, votre style de communication diff√©rera s√ªrement du phras√© propos√© dans ce tutoriel. Ce tutoriel est uniquement con√ßu pour vous aider √† survoler quelques cas d'usage qui pourraient vous √™tre utiles au quotidien, en se basant sur des interactions simples. Libre √† vous, par la suite, de personnaliser et perfectionner votre langage pour interagir efficacement avec votre assistant de code pr√©f√©r√©.</em></p>
<ul>
<li>Il est maintenant temps d'explorer <strong>les d√©pendances</strong> de la classe <code>WordAnalyticsService</code>.<br />
Posez la question suivante √† l'assistant :
<code>Quelles sont les d√©pendances de cette classe ?</code>
En fonction de la r√©ponse obtenue, continuez la discussion :</li>
<li><code>Pourquoi la classe Word ?</code></li>
<li><code>Que fait le code de la classe Word ?</code></li>
<li><code>[...]</code>
N'h√©sitez pas √† poursuivre les √©changes avec l'assistant pour approfondir votre compr√©hension de cette classe.</li>
</ul>
<h5 id="ide-ou-assistant">IDE ou Assistant ?<a class="headerlink" href="#ide-ou-assistant" title="Permanent link">&para;</a></h5>
<p>Ouvrez maintenant la classe <code>Glossary</code> et interagissez, comme √† votre habitude, avec l'assistant :</p>
<ul>
<li><code>Pourquoi la classe Glossary ?</code></li>
<li><code>Que fait ce code ?</code></li>
<li><code>/explain this</code></li>
<li><code>[...]</code></li>
</ul>
<p>Ensuite, posez la question suivante :</p>
<ul>
<li><code>Pourrais-tu me donner toutes les classes qui d√©pendent de Glossary ?</code></li>
</ul>
<p>Il est fort probable que votre assistant vous sugg√®re, pour un tel cas d'usage, de <strong>plut√¥t utiliser les outils de l'IDE pour une r√©ponse plus compl√®te</strong>. Vous devriez obtenir des r√©ponses du type :
<strong><em>Pour une analyse compl√®te, il serait n√©cessaire de rechercher toutes les occurrences de Glossary dans le projet</em></strong> ou <em>Pour une recherche exhaustive, vous pouvez utiliser les fonctionnalit√©s de recherche de votre IDE (IntelliJ IDEA) pour trouver toutes les occurrences de Glossary dans le projet.</em></p>
<blockquote>
<p>C'est donc le bon moment pour rappeler qu'il est essentiel d'<strong>utiliser son assistant de code de mani√®re r√©fl√©chie et pour des cas d'usages pertinents</strong>, d'autant plus que les requ√™tes faites aupr√®s d'outils d'IA g√©n√©rative ont un <strong>co√ªt √©nerg√©tique tr√®s (voire trop) √©lev√© de nos jours</strong> comme le mentionne <a href="https://www.linkedin.com/posts/nitot_on-a-tous-une-bonne-raison-de-passer-%C3%A0-activity-7262137193521889280-Iadq">un article de la Tribune Futurs de Novembre 2024</a></p>
</blockquote>
<h5 id="zoom-sur-la-classe-filereader">Zoom sur la classe <code>FileReader</code><a class="headerlink" href="#zoom-sur-la-classe-filereader" title="Permanent link">&para;</a></h5>
<p>Lors de vos premiers √©changes sur la vision globale du projet, la classe <code>FileReader</code> a probablement √©t√© mentionn√©e par votre assistant. C'est le moment d'en apprendre davantage sur elle.</p>
<p><strong>Ouvrez</strong> la classe <code>FileReader</code> et discutez avec votre assistant :</p>
<ul>
<li><code>Pourquoi la classe FileReader ?</code></li>
<li><code>Que fait ce code ?</code></li>
<li><code>/explain this</code></li>
<li><code>[...]</code></li>
</ul>
<p>Les r√©ponses fournies par votre assistant ne vous auraient-elles pas donn√© envie d'aller explorer la classe  <code>JavaFileParser</code> ?</p>
<h5 id="zoom-sur-la-classe-javafileparser">Zoom sur la classe <code>JavaFileParser</code><a class="headerlink" href="#zoom-sur-la-classe-javafileparser" title="Permanent link">&para;</a></h5>
<p><strong>Ouvrez la classe <code>JavaFileParser</code></strong> et engagez la discussion :</p>
<ul>
<li><code>Pourquoi la classe JavaFileParser ?</code></li>
<li><code>Que fait ce code ?</code></li>
<li><code>/explain this</code></li>
<li><code>[...]</code></li>
</ul>
<p>Demandez ensuite √† votre assistant :</p>
<ul>
<li><code>O√π est utilis√©e la classe JavaFileParser ?</code></li>
<li>
<p>&#8594; Si vous avez de la chance (que les probabilit√©s sont avec vous), l'assistant pourrait vous r√©v√©ler l'extrait de code suivant tir√© de la classe <code>FileReader</code> :</p>
<p><code>kotlin
private val fileSanitizers = mapOf(
    ".java" to JavaFileParser(),
    ".kt" to KotlinFileSanitizer(),
    ".py" to PythonFileSanitizer(),
    ".js" to JavascriptFileSanitizer(),
    ".html" to HtmlFileSanitizer()
)</code></p>
</li>
<li>
<p>&#8594; Si vous n'avez pas eu la chance d'obtenir ce bout de code, reformulez votre question :
    <code>Montre-moi comment est utilis√© JavaFileParser ?</code></p>
</li>
</ul>
<p>Si vous n'obtenez toujours pas le bout de code recherch√© (<strong>les r√©ponses des IA g√©n√©ratives √©tant probabilistes, m√™me avec une formulation tr√®s pr√©cise, il est impossible de garantir un r√©sultat</strong>), allez directement dans la classe <code>FileReader</code> pour v√©rifier que ce bout de code y est bien pr√©sent.</p>
<p>Comme mentionn√© en d√©but de tutoriel, <strong>quelle que soit la r√©ponse obtenue, il est toujours pr√©f√©rable de v√©rifier sa coh√©rence avec le contenu du projet pour s'assurer qu'il ne s'agit pas d'une <em>hallucination</em></strong>. Ainsi, dans tous les cas, un <em>bon</em> r√©flexe consiste √† aller v√©rifier que le code est bien pr√©sent dans la classe <code>FileReader</code>.</p>
<h5 id="essayer-de-comprendre-rapidement-un-choix-de-conception">Essayer de comprendre rapidement un choix de conception<a class="headerlink" href="#essayer-de-comprendre-rapidement-un-choix-de-conception" title="Permanent link">&para;</a></h5>
<p>Relisez attentivement l'extrait de code pr√©c√©dent.<br />
La lecture de ce code ne soul√®ve-t-elle pas chez vous quelques questions du genre :<br />
<em>Pourquoi utilise-t-on <code>JavaFileParser</code> pour les fichiers <code>.java</code>, alors que pour d'autres langages, on emploie des <code>Sanitizers</code> ? D'autant plus qu'en explorant l'arborescence, vous remarquez qu'un fichier <code>JavaFileSanitizer</code> existe bien dans le projet.</em></p>
<p>Si vous ne souhaitez pas passer trop de temps √† comprendre ce choix de conception, demandez directement √† l'assistant de vous √©claircir sur ce point :  </p>
<ul>
<li><code>O√π est utilis√©e la classe JavaFileSanitizer ?</code></li>
<li><code>Pourquoi utiliser JavaFileParser plut√¥t que JavaFileSanitizer ?</code></li>
<li><code>Quand faut-il utiliser JavaFileParser et quand JavaFileSanitizer ?</code></li>
<li><code>[...]</code>
<em>(√† vous de trouver la bonne formulation pour √©lucider et comprendre rapidement ce choix de conception qui peut para√Ætre √©tonnant √† la lecture de code)</em></li>
</ul>
<h4 id="vision-plus-globale-du-metier-module-common">Vision plus globale du m√©tier (module <code>common</code>)<a class="headerlink" href="#vision-plus-globale-du-metier-module-common" title="Permanent link">&para;</a></h4>
<p>Les interactions pr√©c√©dentes ont permis √† votre assistant de code, ainsi qu'√† vous-m√™me, d'en apprendre un peu plus sur le projet.<br />
En ce qui concerne le module <code>common</code>, vous avez, jusqu'√† pr√©sent, explor√© certains points de d√©tails de ce module. Pour obtenir une vision plus g√©n√©rale de ce module et mieux comprendre son r√¥le dans le projet, demandez √† votre assistant :</p>
<ul>
<li><code>Pourrais-tu me d√©crire</code>common<code>?</code></li>
<li><code>Que comprends-tu de la probl√©matique m√©tier de cette application ?</code></li>
<li><code>[...]</code></li>
</ul>
<p>Pensez-vous que les r√©ponses apport√©es par l'assistant ont √©t√© influenc√©es par les interactions que vous avez eues pr√©c√©demment ?</p>
<h4 id="vision-plus-globale-du-projet-et-precision-des-reponses">Vision plus globale du projet et pr√©cision des r√©ponses<a class="headerlink" href="#vision-plus-globale-du-projet-et-precision-des-reponses" title="Permanent link">&para;</a></h4>
<p>Au fur et √† mesure que vous √©changez avec votre assistant de code, ses r√©ponses deviennent de plus en plus pr√©cises. Si vous lui demandez √† nouveau une vision globale du projet avec les m√™mes questions qu'au d√©but de la discussion :</p>
<ul>
<li><code>Describe this project</code></li>
<li><code>Pourrais-tu me d√©crire ce projet</code></li>
<li><code>/explain this project</code></li>
<li><code>[...]</code></li>
</ul>
<p>Vous constaterez que les r√©ponses sont plus d√©taill√©es et sp√©cifiques qu'au d√©but de la discussion. Cela s'explique par le fait que, lors de vos interactions, l'assistant a explor√© diff√©rentes parties du projet en fonction des questions pos√©es. Il a ainsi m√©moris√© des informations sur ces parties, lui permettant d'affiner son contexte et donc de fournir des r√©ponses plus pertinentes et cibl√©es.</p>
<blockquote>
<p>Cela montre <strong>l'importance d'interagir progressivement, √©tape par √©tape, avec votre assistant de code.</strong> En <strong>posant des questions de plus en plus pr√©cises</strong>, vous affinez la compr√©hension du projet et <strong>am√©liorez la qualit√© des r√©ponses de l'assistant.</strong></p>
</blockquote>
<p>Toutefois, une des <strong>limites actuelles</strong> des assistants de code est que <strong>la m√©moire est limit√©e √† la session/discussion en cours.</strong> Si vous d√©marrez une nouvelle session, la connaissance acquise sur le projet sera perdue. √Ä ce jour, il n'y a pas de m√©moire √† long terme ou <strong>RAG</strong> (Retrieval Augmented Generation) dans les assistants de code. Cependant, des √©volutions sont s√ªrement en pr√©paration, comme le montre la fonctionnalit√© de m√©moire entre conversations r√©cemment introduite dans les versions de ChatGPT.</p>
<h2 id="42-mettre-en-place-un-environnement-de-developpement-fonctionnel">4.2 Mettre en place un environnement de d√©veloppement fonctionnel<a class="headerlink" href="#42-mettre-en-place-un-environnement-de-developpement-fonctionnel" title="Permanent link">&para;</a></h2>
<p>Jusqu'√† pr√©sent, l'assistant de code vous a uniquement aid√© √† comprendre le comportement du code existant, sans v√©rifier si ce dernier √©tait compilable et fonctionnel.<br />
Si vous souhaitez aller plus loin avec ce code (effectuer du refactoring, ajouter de nouvelles fonctionnalit√©s, etc.), il devient n√©cessaire de faire compiler ce projet et de l'ex√©cuter dans votre IDE pr√©f√©r√©.</p>
<blockquote>
<p><em>Pour continuer ce tutoriel, l'objectif est simple : assurez-vous que le </em><em>projet compile</em><em> et que vous pouvez </em><em>lancer le <code>main</code> du module <code>cli</code> depuis l'IDE</em><em>. (Concentrez-vous uniquement sur ce <code>main</code>, cela garantit d√©j√† un environnement de d√©veloppement fonctionnel.)</em></p>
</blockquote>
<p>D√®s que vous pouvez ex√©cuter (<strong>Run</strong>ner)  le <code>Main</code> du module <code>cli</code> depuis votre IDE et que vous visualisez une ex√©cution correcte dans la console (comme montr√© dans l'exemple ci-dessus pour une <strong>ex√©cution du <code>main</code> sans param√®tre</strong>), vous serez pr√™t √† poursuivre.</p>
<p><img alt="Console main de cli sans param√®tre" src="../../images/ConsoleMainCliSansParametre.png" title="Console main de cli sans param√®tre" /></p>
<p>Ensuite, toujours depuis l'IDE, lancez le <code>Main</code> du module <code>cli</code> <strong>en passant comme premier</strong> (et seul) <strong>param√®tre le chemin absolu du fichier <code>WordAnalyticsService.java</code> du projet <code>codelinguo</code></strong> que vous avez sous les yeux.<br />
Si tout se d√©roule correctement, vous devriez voir un affichage dans la console similaire √† la capture d'√©cran ci-dessous :</p>
<p><img alt="Console main de cli avec chemin WordAnalyticsService.java comme param√®tre" src="../../images/ConsoleMainCliPourWordAnalyticsService.png" title="Console main de cli avec chemin WordAnalyticsService.java comme param√®tre" /></p>
<p><strong>Bien entendu, l'assistant de code est aussi votre ami pour r√©soudre des probl√®mes li√©s au bon fonctionnement de votre IDE ou √† votre environnement de travail. Il ne se limite pas √† l'interaction avec le code.</strong><br />
Si n√©cessaire, n'h√©sitez pas √† solliciter son aide en lui posant, par exemple, l'une des questions suivantes :</p>
<ul>
<li><code>Comment lancer le main du module cli ?</code></li>
<li><code>Comment lancer le main du module cli depuis l'IDE ?</code></li>
<li><code>Comment lancer le main du module cli depuis l'IDE en passant le chemin absolu du fichier WordAnalyticsService.java comme param√®tre ?</code></li>
<li><code>[...]</code> Continuez √©ventuellement cette discussion en fonction de vos besoins et de votre exp√©rience si vous avez besoin d'informations suppl√©mentaires pour arriver √† vos fins, c'est-√†-dire obtenir des affichages similaires aux captures d'√©cran ci-dessus.</li>
</ul>
<h2 id="43-ameliorer-la-qualite-de-code-dun-projet-existant">4.3 Am√©liorer la qualit√© de code d'un projet existant<a class="headerlink" href="#43-ameliorer-la-qualite-de-code-dun-projet-existant" title="Permanent link">&para;</a></h2>
<p>Pour cette derni√®re partie, nous allons nous focaliser sur la classe <code>JavaFileParser</code>.
Commencez par <strong>ouvrir la classe <code>JavaFileParser</code>.</strong></p>
<h3 id="43a-bien-comprendre-les-choix-de-conception-et-le-code-existant">4.3.a Bien comprendre les choix de conception et le code existant<a class="headerlink" href="#43a-bien-comprendre-les-choix-de-conception-et-le-code-existant" title="Permanent link">&para;</a></h3>
<p>Avant de proc√©der √† un quelconque refactoring pour am√©liorer la qualit√© du code de cette classe, il est essentiel de bien comprendre le comportement de cette classe et d'avoir une <em>bonne</em> vision du code existant.</p>
<h4 id="se-rafraichir-la-memoire-sur-le-comportement-de-la-classe">Se rafra√Æchir la m√©moire sur le comportement de la classe :**<a class="headerlink" href="#se-rafraichir-la-memoire-sur-le-comportement-de-la-classe" title="Permanent link">&para;</a></h4>
<p>Vous avez d√©j√† eu de nombreuses interactions avec cette classe ; une simple question √† votre assistant de code devrait vous aider √† vous rafra√Æchir la m√©moire :</p>
<ul>
<li><code>Pourquoi la classe JavaFileParser ? R√©ponds-moi en fran√ßais.</code></li>
</ul>
<blockquote>
<p><strong>Remarque :</strong> Au cours de vos pr√©c√©dents √©changes avec votre assistant, outre les hallucinations, vous avez s√ªrement observ√© des comportements √©tranges dans les r√©ponses de votre assistant (encore une fois dus au c√¥t√© probabiliste des mod√®les de langage (LLM) et √† leur entra√Ænement). Par exemple :</p>
<ul>
<li>Si vous posez une question en anglais, l'assistant r√©pond g√©n√©ralement en anglais.</li>
<li>Si vous posez une question en fran√ßais, la r√©ponse peut √™tre en fran√ßais, en anglais, ou m√™me en "franglais"(des mots anglais perdus dans le fran√ßais). Ainsi si vous souhaitez absolument une r√©ponse en fran√ßais, mieux vaut le pr√©ciser au d√©but de votre prompt...</li>
</ul>
</blockquote>
<h4 id="explorer-le-concept-dast-abstract-syntax-tree">Explorer le concept d'AST (Abstract Syntax Tree)<a class="headerlink" href="#explorer-le-concept-dast-abstract-syntax-tree" title="Permanent link">&para;</a></h4>
<p>Dans la r√©ponse de l'assistant, vous avez surement vu appara√Ætre le terme <strong>AST</strong>.<br />
Vous pouvez approfondir ce concept avec des questions telles que :</p>
<ul>
<li><code>Peux-tu m'expliquer ce qu'est un AST ? (en fran√ßais)</code></li>
<li><code>Peux-tu me donner des exemples pr√©cis d'AST ?</code></li>
<li><code>[...]</code></li>
</ul>
<h4 id="comprendre-limplementation-de-last-dans-javafileparser">Comprendre l'impl√©mentation de l'AST dans <code>JavaFileParser</code><a class="headerlink" href="#comprendre-limplementation-de-last-dans-javafileparser" title="Permanent link">&para;</a></h4>
<p>Pour aller plus loin, vous pouvez demander :  </p>
<ul>
<li><code>O√π et comment l'AST est-il impl√©ment√© dans la classe JavaFileParser ?</code></li>
</ul>
<h4 id="explorer-la-methode-processfile">Explorer la m√©thode <code>processFile</code><a class="headerlink" href="#explorer-la-methode-processfile" title="Permanent link">&para;</a></h4>
<p>En analysant les r√©ponses de l'assistant, vous avez probablement relev√© des termes m√©tiers et des extraits de code li√©s √† la m√©thode <code>processFile</code>. Vous d√©cidez donc d'en savoir un peu plus sur cette impl√©mentation :</p>
<ul>
<li><code>Peux-tu m'expliquer le code de processFile</code></li>
</ul>
<h4 id="le-pattern-visiteur-et-voidvisitorpattern">Le Pattern Visiteur et <code>VoidVisitorPattern</code><a class="headerlink" href="#le-pattern-visiteur-et-voidvisitorpattern" title="Permanent link">&para;</a></h4>
<p>La r√©ponse de l'assistant mentionne s√ªrement les termes <strong>visiteur</strong> et <code>VoidVisitorPattern</code>. Le pattern visiteur du GoF (Gang of Four) vous est peut-√™tre familier, et dans le code de <code>processFile</code>, vous avez remarqu√© des m√©thodes <code>accept</code> et <code>visit</code>, caract√©ristiques de ce pattern. Mais quel est donc ce pattern ? Y-a-il un lien avec le pattern du GoF ? Pour clarifier, demandez :</p>
<ul>
<li><code>Peux-tu m'en dire plus sur le VoidVisitorAdapter ?</code></li>
</ul>
<blockquote>
<p><strong>Rappel :</strong> Pour consulter le code de la classe <code>VoidVisitorAdapter</code>, pas besoin d'utiliser l'assistant de code ; l'IDE est bien s√ªr votre ami pour ce cas d'usage. Depuis le code de la classe <code>JavaFileParser</code>, un simple <strong>CTRL+clic</strong> sur <code>VoidVisitorAdapter</code> ouvrira le code de cette classe. Vous pourrez ainsi visualiser toutes les m√©thodes <code>visit</code> qu'elle contient et observer √©galement qu'elle impl√©mente <code>VoidVisitor</code>.</p>
</blockquote>
<p>Apr√®s ces √©changes, l'impl√©mentation de la m√©thode <code>processFile</code> devrait vous para√Ætre plus claire et correcte.</p>
<h3 id="43b-aider-a-la-mise-en-place-de-nouveaux-tests-unitaires">4.3.b Aider √† la mise en place de nouveaux tests unitaires<a class="headerlink" href="#43b-aider-a-la-mise-en-place-de-nouveaux-tests-unitaires" title="Permanent link">&para;</a></h3>
<h4 id="1-ameliorer-la-couverture-de-code-de-la-classe-wordanalyticsservice">1. Am√©liorer la couverture de code de la classe <code>WordAnalyticsService</code><a class="headerlink" href="#1-ameliorer-la-couverture-de-code-de-la-classe-wordanalyticsservice" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>D√©pliez la branche de test (<code>src/test/...</code>) du module <code>common</code> pour v√©rifier que la classe <code>WordAnalyticsService</code> poss√®de d√©j√† une classe de test <code>WordAnalyticsServiceTest</code>.</p>
</li>
<li>
<p>Ouvrez la classe <code>WordAnalyticsServiceTest</code> et ex√©cutez les tests de cette classe pour v√©rifier que le code compile et que tous les tests passent.</p>
</li>
<li>
<p>Relancez les tests en demandant cette fois-ci la couverture de code.</p>
</li>
</ul>
<p><img alt="Couverture de code initiale de la classe WordAnalyticsServcice" src="../../images/CouvertureCodeWAS_Initiale.png" title="Couverture de code initiale de la classe WordAnalyticsServcice" /></p>
<ul>
<li>
<p>Consultez le code de la classe <code>WordAnalyticsService</code> afin de constater que la m√©thode <code>glossaryCoverageRatio</code> n'est actuellement pas couverte par les tests. Demandez √† votre assistant de vous aider √† couvrir cette m√©thode, par exemple, avec la commande :<br />
<code>/tests glossaryCoverageRatio</code></p>
</li>
<li>
<p>Placez-vous √† la fin de la classe <code>WordAnalyticsServiceTest</code> et ins√©rez le code fourni par l'assistant (utilisez le bouton <em>Insert Code Block at Cursor</em> dans le chat).</p>
</li>
<li>
<p>Si besoin, ajoutez les <code>import</code> pour faire compiler le code.</p>
</li>
<li>
<p>Ex√©cutez les tests (et si l'un d'entre eux √©choue √† cause d'une valeur <code>null</code>, supprimez-le), puis relancez l'analyse de couverture de code. Vous devriez constater une augmentation du pourcentage de la couverture √† tous les niveaux : m√©thodes, lignes et branches, gr√¢ce aux tests ajout√©s.</p>
</li>
</ul>
<h4 id="2-tester-la-classe-javafileparser">2. Tester la classe <code>JavaFileParser</code><a class="headerlink" href="#2-tester-la-classe-javafileparser" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Consultez √† nouveau la branche de test (<code>src/test/...</code>) du module <code>common</code> et notez que la classe <code>JavaFileParser</code> n'a pas encore de classe de test associ√©e.</p>
</li>
<li>
<p>Ouvrez la classe <code>JavaFileParser</code> et demandez √† votre assistant de vous aider √† cr√©er des tests avec la commande<br />
<code>/tests</code></p>
</li>
<li>
<p>Cr√©ez <em>au bon endroit</em> la classe <code>JavaFileParserTest</code> et ins√©rez-y le code g√©n√©r√© par l'assistant.</p>
</li>
<li>
<p>Si besoin, ajoutez les <code>import</code> pour faire compiler le code.</p>
</li>
<li>
<p>Si une erreur de compilation n√©cessite de modifier la visibilit√© du code de production, ne modifiez pas le code existant et supprimez le test concern√©, vous en avez d'autres √† votre disposition.</p>
</li>
<li>
<p>Ex√©cutez les tests.<br />
Il est probable que les tests √©chouent en raison de donn√©es de tests contenant des chemins de fichiers en dur pointant vers des fichiers inexistants. Cela sera notamment le cas si l'assistant vous a g√©n√©r√© un code de test similaire au suivant :</p>
</li>
</ul>
<p><code>kotlin
   @Test
   fun processFile_withEmptyJavaFile_returnsEmptyList() {
       val parser = JavaFileParser()
       val path = "src/test/resources/EmptyJavaFile.java"
       val words = parser.processFile(path)
       assertTrue(words.isEmpty())
   }</code></p>
<p><strong><em>Pour √©viter ce type d'erreurs, une solution consiste √† utiliser des fichiers temporaires gr√¢ce √† l'annotation <code>@TempDir</code>.</em></strong></p>
<ul>
<li><strong>Si vos tests ont √©chou√© en raison de la mauvaise qualit√© des donn√©es de tests</strong> :</li>
<li>Supprimez tous les tests de la classe <code>JavaFileParserTest</code> et pr√©cisez dans votre prompt que vous souhaitez des tests utilisant <code>@TempDir</code> :<br />
<code>/tests en utilisant @TempDir</code>  </li>
<li>
<p>Ins√©rez le nouveau code g√©n√©r√© dans le fichier <code>JavaFileParserTest</code>. Si besoin, ajoutez les <code>import</code> pour faire compiler le code.</p>
</li>
<li>
<p><strong>Dans tous les cas</strong>, ex√©cutez √† nouveau les tests. La plupart des tests devraient passer.<br />
Si un test √©choue, mettez-le pour le moment en <code>@Disabled</code> (peut-√™tre que le comportement qu'il teste n'a pas encore √©t√© impl√©ment√©) ou supprimez-le s'il ne correspond pas √† vos (futurs) besoins.
Le test le plus susceptible de poser probl√®me est celui qui v√©rifie le comportement d'un fichier inexistant, et qui pourrait s'appeler <code>processFile_withNonExistentFile_returnsEmptyList</code> et qui n√©cessiterait donc une modification de la logique m√©tier pour s'assurer que le code traite correctement les fichiers manquants.</p>
</li>
<li>
<p>Par curiosit√©, <strong>lancez la couverture de code</strong>.
Bien s√ªr, l'assistant n'a probablement <strong>pas couvert la classe √† 100 %</strong>, mais il a amorc√© l'√©criture de tests, vous donnant une premi√®re base. √Ä vous ensuite de d√©cider si vous souhaitez compl√©ter cette suite de tests pour am√©liorer la couverture de code sur cette classe.</p>
</li>
<li>
<p><strong>√Ä partir de cette base de tests</strong>, vous pouvez :</p>
</li>
<li>continuer √† √©crire d'autres tests manuellement en vous inspirant des tests g√©n√©r√©s.</li>
<li>
<p>continuer d'interagir avec l'assistant en lui donnant des consignes plus ou moins pr√©cises, apr√®s avoir identifi√© les parties du code qui ne sont pas encore couvertes, par exemple :</p>
<ul>
<li><code>Pourrais-tu m'√©crire deux autres tests pour am√©liorer la couverture de code ?</code></li>
<li><code>Ajoute un test qui couvre visit de MethodDeclaration et visit de Parameter.</code></li>
</ul>
</li>
<li>
<p>Et pour augmenter encore plus rapidement la couverture de code, <strong>s√©lectionnez tout le code de la m√©thode <code>processFile</code></strong> et demandez √† votre assistant de g√©n√©rer les tests :<br />
<code>/tests</code><br />
  Ins√©rez le code de test g√©n√©r√© dans <code>JavaFileParserTest</code> et relancez la couverture.</p>
</li>
</ul>
<blockquote>
<p><strong>Cette exp√©rience illustre plusieurs points :</strong></p>
<ul>
<li>
<p><strong>L'assistant de code est un bon outil pour d√©marrer sur une page blanche</strong>.</p>
</li>
<li>
<p>Mais attention, <strong>l'assistant de code n'est pas exhaustif dans sa r√©ponse</strong> ; il ne vous proposera qu'une partie des tests ou des exemples, et ne fera donc pas tout le travail √† votre place.</p>
</li>
<li>
<p><strong>Pour des r√©ponses plus compl√®tes, il est n√©cessaire de continuer √† dialoguer avec l'assistant</strong> en formulant des demandes plus ou moins pr√©cises : un <strong>prompt pas √† pas</strong> est une bonne pratique.</p>
</li>
<li>
<p><strong>Restez toujours vigilant</strong> par rapport aux r√©ponses g√©n√©r√©es et <strong>(ab)usez de votre libre-arbitre et de votre esprit critique</strong> pour d√©tecter d'√©ventuelles hallucinations et ne conserver que les r√©ponses qui conviennent √† vos besoins.</p>
</li>
<li>
<p>Comme <strong>l'historique des √©changes est utilis√© par l'assistant pour affiner le contexte</strong>, il est conseill√© de <strong>nettoyer r√©guli√®rement le chat</strong> en supprimant les requ√™tes non pertinentes ou qui n'ont pas donn√© le(s) r√©sultat(s) attendu(s).</p>
</li>
<li>
<p>Le <strong>caract√®re probabiliste</strong> des r√©ponses de l'assistant pr√©sente des <strong>inconv√©nients</strong> et des <strong>avantages</strong>.
D'un c√¥t√©, la qualit√© des donn√©es de test g√©n√©r√©es n'est pas toujours garantie. Toutefois, cet aspect non d√©terministe peut aussi conduire √† la <strong>d√©couverte de nouvelles, voire meilleures, pratiques.</strong><br />
Personnellement, lors d'une premi√®re demande de g√©n√©ration de tests, l'annotation <code>@TempDir</code>, utilis√©e pour les r√©pertoires temporaires, a √©t√© d√©couverte. Malheureusement, ce fut la seule fois o√π l'assistant l'a utilis√©e. Peut-√™tre avez-vous eu la chance d'obtenir des tests unitaires fonctionnels du premier coup, ou peut-√™tre pas üòâ.</p>
</li>
</ul>
</blockquote>
<ul>
<li>Et vous, connaissiez-vous <code>@TempDir</code> avant cette exp√©rience ?<br />
Votre assistant peut vous aider √† en savoir plus en posant la question suivante :<br />
<code>Pourrais-tu m'en dire plus sur  @TempDir ?</code></li>
</ul>
<p>La r√©ponse de l'assistant sera probablement similaire √† la capture d'√©cran ci-dessous :</p>
<p><img alt="A propos de l'annotation TempDir" src="../../images/TempDirAPropos.png" title="A propos de l'annotation TempDir" /></p>
<h3 id="43c-aider-au-refactoring">4.3.c Aider au refactoring<a class="headerlink" href="#43c-aider-au-refactoring" title="Permanent link">&para;</a></h3>
<p>Maintenant que le comportement est couvert par des tests, vous pouvez envisager sereinement un petit refactoring. Pour cela, demandez √† l'assistant de vous proposer des am√©liorations en utilisant les commandes suivantes :
<strong><code>/fix</code></strong> (vous pouvez pr√©ciser le nom de la m√©thode si vous souhaitez rester focalis√© sur celle-ci)<br />
<strong><code>/simplify</code></strong></p>
<ul>
<li>
<p>Par exemple, revenez sur la <code>WordAnalyticsService</code>, demandez :<br />
<code>/fix glossaryCoverageRatio</code><br />
<code>/simplify</code></p>
</li>
<li>
<p>Faites de m√™me pour la <code>JavaFileParser</code>, demandez :<br />
<code>/fix</code><br />
<code>/simplify</code></p>
</li>
</ul>
<p>Dans les deux cas, l'assistant vous proposera des modifications, mais c'est √† vous de d√©cider si vous souhaitez les int√©grer dans votre code (le fameux <strong>libre arbitre</strong>).</p>
<h3 id="43d-aider-a-la-revue-de-code">4.3.d Aider √† la revue de code<a class="headerlink" href="#43d-aider-a-la-revue-de-code" title="Permanent link">&para;</a></h3>
<p>M√™me sans avoir mis en place un harnais de tests, vous pouvez demander √† votre assistant de code de vous proposer des suggestions de refactoring sur des bouts de code plus ou moins volumineux.</p>
<p>Revenez sur la classe <code>Main</code> du module <code>cli</code>, ouvrez le code de cette classe et portez votre attention sur la m√©thode <code>processPath</code>, qui peut para√Ætre un peu longue.</p>
<p>Pour effectuer une rapide revue de code sur cette classe , demandez √† l'assistant :  </p>
<ul>
<li><code>/fix</code>  </li>
<li><code>/simplify</code>  </li>
</ul>
<p>Ces commandes devraient d√©j√† vous donner des pistes pour am√©liorer la lisibilit√© de <code>processPath</code>.</p>
<p>Vous pouvez ensuite approfondir l'analyse en posant vos propres questions, celles que vous vous posez habituellement lors d'une revue de code : `</p>
<ul>
<li><code>Y a-t-il des code smells dans ce bout de code ?</code></li>
<li><code>Y a-t-il des principes SOLID non respect√©s dans ce code ?</code></li>
<li><code>Le code peut-il √™tre optimis√© en termes de performance ou de lisibilit√© ?</code></li>
<li><code>La duplication de code est-elle pr√©sente ?</code></li>
<li><code>Y a-t-il des d√©pendances cycliques ou des responsabilit√©s mal d√©finies ?</code></li>
<li><code>[...]</code></li>
</ul>
<p>Lorsque vous √©changez avec votre assistant des questions de qualit√© de code, celui-ci peut √©galement vous sugg√©rer d'explorer des aspects tels que la lisibilit√©, la maintenabilit√© ou la modularit√© du code en vous proposant de lui poser les questions suivantes :</p>
<ul>
<li><code>How can I improve the readability of the selected code?</code></li>
<li><code>How can I improve the maintainability of the selected code?</code></li>
<li><code>How can I improve the modularity of the selected code?</code></li>
<li><code>How can I refactor the code to improve modularity?</code></li>
<li><code>What are some options for simplifying the code?</code></li>
</ul>
<p>M√™me si ces questions ne vous seront pas automatiquement propos√©es par l'assistant au moment o√π vous le souhaiteriez, il est toujours utile de les garder en t√™te <strong>comme une bo√Æte √† outils de prompts pour am√©liorer la qualit√© de votre code</strong> √† tout moment.</p>
<h2 id="44-proposer-des-pistes-damelioration-sur-des-problematiques-sensibles">4.4 Proposer des pistes d'am√©lioration sur des probl√©matiques sensibles<a class="headerlink" href="#44-proposer-des-pistes-damelioration-sur-des-problematiques-sensibles" title="Permanent link">&para;</a></h2>
<p>Pour terminer ce tutoriel, il pourrait √™tre int√©ressant de challenger votre assistant de code sur des probl√©matiques sensibles, notamment celles dans lesquelles vous n'√™tes pas expert.</p>
<p>Prenons par exemple les questions de <strong>s√©curit√©</strong>.<br />
Vous pourriez commencer avec un prompt comme :</p>
<ul>
<li><code>Comment pourrais-tu am√©liorer la s√©curit√© dans ce projet ?</code></li>
<li><code>[‚Ä¶]</code> <em>suivant la r√©ponse obtenue, n'h√©sitez pas √† approfondir certains points pas √† pas avec votre assistant.</em></li>
</ul>
<p>Votre assistant vous proposera probablement de continuer avec les questions suivantes :</p>
<ul>
<li><code>What are some best practices for securing a Java project?</code></li>
<li><code>What are some common security vulnerabilities in Java projects?</code>  </li>
<li><code>[‚Ä¶]</code> <em>suivant la r√©ponse obtenue, n'h√©sitez pas √† approfondir certains points pas √† pas avec votre assistant, par exemple :</em></li>
<li><code>Y a-t-il un risque d'exposition de donn√©es sensibles (Sensitive Data Exposure) dans ce projet ?</code></li>
<li><code>[‚Ä¶]</code></li>
</ul>
<p>Vous aurez peut-√™tre aussi des questions plus basiques √† lui poser :</p>
<ul>
<li><code>Concr√®tement, pourrais-tu me montrer o√π et comment mieux g√©rer les exceptions dans ce projet ?</code></li>
<li><code>[‚Ä¶]</code></li>
</ul>
<p>Bien s√ªr, si vous n'√™tes pas expert en s√©curit√©, il est recommand√© de consulter un sp√©cialiste avant d'adopter les propositions de l'assistant de code. Comme nous l'avons souvent soulign√© dans ce tutoriel, cet outil est l√† pour vous assister, mais seule l'expertise humaine peut d√©terminer si une suggestion de l'assistant est pertinente et doit √™tre int√©gr√©e dans l'application.</p>
<p>Il est √©galement essentiel de garder √† l'esprit que les outils d'IA g√©n√©rative sont uniquement des aides pour vous rendre plus productif et cr√©atif. Ils ne sont pas √† l'abri des erreurs ou des hallucinations. Vous restez ma√Ætre de votre travail, et la <strong>d√©cision finale vous appartient</strong>.</p>
<hr />
<p>Si vous souhaitez en savoir plus sur le projet qui se cache derri√®re le code utilis√© dans cette partie du tutoriel, vous pouvez consulter le d√©p√¥t suivant : <a href="https://github.com/iblasquez/ubiquitous-langage-code-quality">https://github.com/iblasquez/ubiquitous-langage-code-quality</a></p>
<hr />
<p><strong><em>Acc√©dez donc maintenant √† la partie suivante qui est : <a href="../Liens/">Liens utilis√©s pour la r√©daction du tutoriel</a>ou retournez √† l'<a href="../">Accueil</a>.</em></strong></p>
<hr />
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../3_ProjetExistantSimple/" class="btn btn-neutral float-left" title="Mise en place de nouvelles r√®gles m√©tiers dans un projet simple"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../Liens/" class="btn btn-neutral float-right" title="Quelques liens utiles">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../3_ProjetExistantSimple/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../Liens/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
